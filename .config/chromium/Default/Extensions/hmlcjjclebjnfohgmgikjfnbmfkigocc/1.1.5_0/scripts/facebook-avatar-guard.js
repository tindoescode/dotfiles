"use strict";!function(e){e.runtime.sendMessage({cmd:"track_page_view",path:"/facebook-avatar-guard.html"}),e.cookies.get({url:"https://*.facebook.com",name:"c_user"},function(a){if(null!==a)e.storage.sync.get({facebook_avatar_guard:!1},function(t){new Vue({el:"#juno_okyo",data:{user_id:a.value,enable:t.facebook_avatar_guard,loading:!1},methods:{updateGuard:function(){var a=!this.enable;this.loading=!0,e.runtime.sendMessage({cmd:"avatar_guard",value:a})},i18n:function(a){return e.i18n.getMessage(a)}},mounted:function(){var a=this;e.runtime.onMessage.addListener(function(t,n,o){var s=t.cmd.toLowerCase();switch(s){case"avatar_guard_response":t.success&&(e.storage.sync.set({facebook_avatar_guard:t.state}),a.enable=t.state),a.loading=!1}}),this.loading=!0,fetch("https://m.facebook.com/"+this.user_id,{credentials:"include"}).then(function(e){return e.text()}).then(function(e){a.enable=e.includes("_4dc_ _4dd0"),a.loading=!1})}})});else{if("notifications"in e){var t=e.extension.getURL("images/juno_okyo.png");e.notifications.create({type:"basic",iconUrl:t,appIconMaskUrl:t,title:e.i18n.getMessage("appName"),message:e.i18n.getMessage("error")+": "+e.i18n.getMessage("facebookLoginError")+"."})}window.top.location.replace("https://www.facebook.com/login")}})}(chrome);